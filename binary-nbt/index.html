<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>binary-nbt</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.js" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">binary-nbt</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
				<li>
					<a href="globals.html">Globals</a>
				</li>
			</ul>
			<h1> binary-nbt</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<h1 id="binary-nbt">Binary NBT</h1>
				<p><a href="http://npm.im/binary-nbt"> <img src="https://img.shields.io/npm/v/binary-nbt.svg?style=flat-square" alt="npm"> <img src="https://img.shields.io/npm/v/binary-nbt/master.svg?style=flat-square" alt="npm (tag)"> <img src="https://img.shields.io/npm/dt/binary-nbt.svg?style=flat-square" alt="npm"> </a>
				<a href="https://levertion.github.io/mcfunction/binary-nbt"><img src="https://img.shields.io/badge/docs-TypeDoc-blueviolet.svg?style=flat-square" alt="docs"></a></p>
				<!-- Force update -->
				<p>A serializer and deserializer for Minecraft&#39;s <a href="https://wiki.vg/NBT">NBT</a>
				archives with a lossless but ergonomic output format.</p>
				<p>This also contains a command line tool to convert an NBT file to JSON, called
				<code>binary-nbt</code></p>
				<p>Lossless here means that a value can be deserialized from NBT and then
					serialized back into exactly the same NBT value (i.e. the types from the NBT can
					be recovered). Ergonomic means that the deserialized value can be treated as a
					plain JavaScript object. E.g. <code>level.Data.allowCommands</code> works as expected for a
					<code>level.dat</code> file. Other libraries such as
					<a href="https://www.npmjs.com/package/nbt"><code>nbt</code></a> use custom objects, e.g.
					<code>{value: &lt;...&gt;, type: TAG_COMPOUND}</code>.This is possible through the use of ES6
					<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol"><code>Symbol</code></a>s -
					every deserialized object has <code>NBTTypeSymbol</code> applied to it, which is used in
					serialisation (with sensible defaults for when this is not provided). This
					approach
					<a href="https://stackoverflow.com/questions/42560540/what-happens-when-i-object-assign-to-a-primitive-type-in-javascript">also works for primitives</a>.
					The primary disadvantage of this approach is that the produced value cannot be
					safely serialised into any form other than NBT without losing the data required
					to reconstruct the NBT. However, if such serialisation is required, NBT can be
				used as the format!</p>
				<p><code>TAG_LONG</code>s are deserialized as <code>Long</code>s from the
				<a href="https://www.npmjs.com/package/long"><code>long</code></a> package.</p>
				<p>This library currently only supports NodeJS 8 and 10. Other javascript
					environments may be supported, should the need arise. Open an issue if you are
					interested. We also only support big endian NBT, so the pocket edition nbt is
				not yet supported</p>
				<p>This package is part of the
					<a href="https://github.com/Levertion/mcfunction"><code>mcfunction-langserver</code></a> project. It
					is published automatically - see
				<a href="https://github.com/Levertion/mcfunction#publishing-strategy">the publishing strategy</a></p>
				<h2 id="api">API</h2>
				<h3 id="deserialization">Deserialization</h3>
				<p>Basic usage:</p>
				<pre><code class="language-ts"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">deserializeNBTUncompressed</span>(<span class="hljs-params">buffer: Buffer</span>): <span class="hljs-title">any</span></span>;</code></pre>
				<pre><code class="language-js"><span class="hljs-keyword">const</span> { deserializeNBTUncompressed } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"binary-nbt"</span>);
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">"fs"</span>);

<span class="hljs-keyword">const</span> contents = fs.readFileSync(<span class="hljs-string">"some_nbt.nbt"</span>);
<span class="hljs-built_in">console</span>.log(deserializeNBTUncompressed(contents));</code></pre>
				<p>Or in Typescript:</p>
				<pre><code class="language-ts"><span class="hljs-keyword">const</span> { deserializeNBTUncompressed } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"binary-nbt"</span>);
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">"fs"</span>);

<span class="hljs-keyword">const</span> contents = fs.readFileSync(<span class="hljs-string">"level.dat"</span>);
<span class="hljs-keyword">const</span> level: Level = deserializeNBTUncompressed(contents);</code></pre>
				<h3 id="command-line">Command line</h3>
				<p>The command line tool converts NBT values to JSON, whether compressed or not:</p>
				<pre><code>$ binary-nbt <span class="hljs-comment">--help</span>
binary-nbt

Usage:
  $ binary-nbt [...<span class="hljs-built_in">files</span>]

Commands:
  [...<span class="hljs-built_in">files</span>]  Convert <span class="hljs-built_in">files</span> <span class="hljs-built_in">from</span> NBT <span class="hljs-keyword">into</span> JSON, outputting them <span class="hljs-built_in">to</span> <span class="hljs-keyword">stdout</span>.
If <span class="hljs-keyword">a</span> <span class="hljs-built_in">directory</span> is passed, <span class="hljs-keyword">it</span> is recursively walked <span class="hljs-keyword">for</span> <span class="hljs-built_in">files</span>

For more info, run <span class="hljs-keyword">any</span> <span class="hljs-keyword">command</span> <span class="hljs-title">with</span> <span class="hljs-title">the</span> `--<span class="hljs-title">help</span>` <span class="hljs-title">flag</span>:
  $ binary-nbt <span class="hljs-comment">--help</span>

Options:
  -o, <span class="hljs-comment">--out [dir]        Place the resulting files into this directory instead</span>
  -e, <span class="hljs-comment">--extension [ext]  Extension to output the JSON files in (default: .json)</span>
  -h, <span class="hljs-comment">--help             Display this message</span>

Examples:
binary-nbt some_dir <span class="hljs-built_in">file</span>.nbt <span class="hljs-built_in">file</span>.nbt.gz <span class="hljs-comment">--output .</span>
binary-nbt some_dir -o <span class="hljs-built_in">result</span>
</code></pre><h2 id="comparison-with-alternatives">Comparison with alternatives</h2>
				<p>This library is yet another NBT library amongst the wide selection of existing
					JavaScript NBT libraries. A comparison with a selection of the others is below.
					The primary advantages of this library are the use of <code>Promise</code>s, vanilla
					JavaScript classes (e.g. <code>Number</code>, <code>String</code>) which can be treated as primitives
					in most cases, and Typescript type definitions. We also have full
					<a href="https://levertion.github.io/mcfunction/binary-nbt">API documentation</a> generated
				using <a href="https://typedoc.org/">TypeDoc</a>.</p>
				<p>A brief rundown of the differences between other packages and this one are
					below. For example, if they don&#39;t support little endian NBT, no attention is
					brought to that fact as it is not a difference from this package. These packages
					are described in the order they appear in when searching for
				<a href="https://www.npmjs.com/search?q=nbt"><code>nbt</code> on npm</a>.</p>
				<h3 id="nbt-"><a href="https://www.npmjs.com/package/nbt"><code>nbt</code></a>:</h3>
				<ul>
					<li>Has a very desirable name on <code>npm</code>;</li>
					<li>Data can be safely serialised and deserialized into formats other than NBT;</li>
					<li>Supports the browser</li>
					<li>Has good <a href="http://sjmulder.github.io/nbt-js/">API documentation</a>, although
					the following two points aren&#39;t well signposted;</li>
					<li>Every value is wrapped in an unwieldy
					<code>{value: &lt;actual value&gt;, type: &lt;type&gt;}</code> object;</li>
					<li><code>TAG_LONGS</code>s are encoded as an <code>[upper, upper]</code> number array, without any
					convenience APIs;</li>
					<li>Doesn&#39;t have <code>Typescript</code> type definitions available;</li>
					<li>Doesn&#39;t use <code>Promise</code>s (this can be circumvented using <code>util.promisify</code>);</li>
				</ul>
				<h3 id="prismarine-nbt"><a href="https://www.npmjs.com/package/prismarine-nbt"><code>prismarine-nbt</code></a></h3>
				<ul>
					<li>Supports little endian NBT;</li>
					<li>Uses same format as <code>nbt</code> for longs and other values;</li>
					<li>Has weak API documentation and no <code>Typescript</code> type definitions;</li>
					<li>Doesn&#39;t use <code>Promise</code>s;</li>
				</ul>
				<h3 id="nbt-ts"><a href="https://www.npmjs.com/package/nbt-ts"><code>nbt-ts</code></a></h3>
				<ul>
					<li>Uses <code>BigInt</code>s for longs, so only supports Node 10;</li>
					<li>Custom classes are used for numbers, so the value must be accessed using the
					<code>value</code> property;</li>
				</ul>
				<h3 id="excluded-packages">Excluded packages</h3>
				<p>Some packages are not up-to-date with the latest version of NBT or are not NBT
				packages and so are excluded. These are:</p>
				<ul>
					<li><a href="https://www.npmjs.com/package/node-nbt"><code>node-nbt</code></a>,
						<a href="https://www.npmjs.com/package/mcnbt"><code>mcnbt</code></a>,
						<a href="https://www.npmjs.com/package/nbt-js"><code>nbt-js</code></a>,
						<a href="https://www.npmjs.com/package/minecraft-nbt">minecraft-nbt</a>: No support for
					<code>TAG_LONG_ARRAY</code></li>
					<li><a href="https://www.npmjs.com/package/mc-schematic"><code>mc-schematic</code></a>,
						<a href="https://www.npmjs.com/package/minecraft-schematic"><code>minecraft-schematic</code></a>:
					Not packages for arbritrary NBT data - provide a APIs for schematics.</li>
					<li><a href="https://www.npmjs.com/package/nibbit"><code>nibbit</code></a>,
						<a href="https://www.npmjs.com/package/nibbit-nolong"><code>nibbit-nolong</code></a>: No support
					for longs or long arrays.</li>
					<li><a href="https://www.npmjs.com/package/nbtviewer"><code>nbtviewer</code></a>: An NBT cli, not a
					package</li>
					<li><a href="https://www.npmjs.com/package/mcpe-anvil"><code>mcpe-anvil</code></a>: Just uses
					<code>prismarine-nbt</code> internally.</li>
					<li><a href="https://www.npmjs.com/package/@nbxx/nb-table"><code>@nbxx/nb-table</code></a>,
						<a href="https://www.npmjs.com/package/nbtemplates"><code>nbtemplates</code></a> and
					<a href="https://www.npmjs.com/package/nbtc"><code>nbtc</code></a>: Unrelated to Minecraft NBT</li>
				</ul>
				<h2 id="changelog">Changelog</h2>
				<p>The
					<a href="https://github.com/Levertion/mcfunction/blob/master/binary-nbt/CHANGELOG.md">changelog</a>
				contains a list of all the changes between versions</p>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class="globals  ">
						<a href="globals.html"><em>Globals</em></a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
					<li class=" tsd-kind-enum">
						<a href="enums/tagtype.html" class="tsd-kind-icon">Tag<wbr>Type</a>
					</li>
					<li class=" tsd-kind-variable">
						<a href="globals.html#nbtlistsymbol" class="tsd-kind-icon">NBTList<wbr>Symbol</a>
					</li>
					<li class=" tsd-kind-variable">
						<a href="globals.html#nbtnamesymbol" class="tsd-kind-icon">NBTName<wbr>Symbol</a>
					</li>
					<li class=" tsd-kind-variable">
						<a href="globals.html#nbttypesymbol" class="tsd-kind-icon">NBTType<wbr>Symbol</a>
					</li>
					<li class=" tsd-kind-variable">
						<a href="globals.html#byte" class="tsd-kind-icon">byte</a>
					</li>
					<li class=" tsd-kind-variable">
						<a href="globals.html#bytearray" class="tsd-kind-icon">byte<wbr>Array</a>
					</li>
					<li class=" tsd-kind-variable">
						<a href="globals.html#compound" class="tsd-kind-icon">compound</a>
					</li>
					<li class=" tsd-kind-variable">
						<a href="globals.html#double" class="tsd-kind-icon">double</a>
					</li>
					<li class=" tsd-kind-variable">
						<a href="globals.html#float" class="tsd-kind-icon">float</a>
					</li>
					<li class=" tsd-kind-variable">
						<a href="globals.html#int" class="tsd-kind-icon">int</a>
					</li>
					<li class=" tsd-kind-variable">
						<a href="globals.html#intarray" class="tsd-kind-icon">int<wbr>Array</a>
					</li>
					<li class=" tsd-kind-variable">
						<a href="globals.html#list" class="tsd-kind-icon">list</a>
					</li>
					<li class=" tsd-kind-variable">
						<a href="globals.html#long" class="tsd-kind-icon">long</a>
					</li>
					<li class=" tsd-kind-variable">
						<a href="globals.html#longarray" class="tsd-kind-icon">long<wbr>Array</a>
					</li>
					<li class=" tsd-kind-variable">
						<a href="globals.html#short" class="tsd-kind-icon">short</a>
					</li>
					<li class=" tsd-kind-variable">
						<a href="globals.html#string" class="tsd-kind-icon">string</a>
					</li>
					<li class=" tsd-kind-function tsd-has-type-parameter">
						<a href="globals.html#createnbttype" class="tsd-kind-icon">createNBTType</a>
					</li>
					<li class=" tsd-kind-function tsd-has-type-parameter">
						<a href="globals.html#deserializecompressednbt" class="tsd-kind-icon">deserialize<wbr>CompressedNBT</a>
					</li>
					<li class=" tsd-kind-function tsd-has-type-parameter">
						<a href="globals.html#deserializenbt" class="tsd-kind-icon">deserializeNBT</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#serializenbt" class="tsd-kind-icon">serializeNBT</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#serializenbtdebug" class="tsd-kind-icon">serializeNBTDebug</a>
					</li>
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-module"><span class="tsd-kind-icon">Module</span></li>
				<li class="tsd-kind-object-literal"><span class="tsd-kind-icon">Object literal</span></li>
				<li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li>
				<li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li>
				<li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li>
				<li class="tsd-kind-index-signature"><span class="tsd-kind-icon">Index signature</span></li>
				<li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-enum"><span class="tsd-kind-icon">Enumeration</span></li>
				<li class="tsd-kind-enum-member"><span class="tsd-kind-icon">Enumeration member</span></li>
				<li class="tsd-kind-property tsd-parent-kind-enum"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-enum"><span class="tsd-kind-icon">Method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li>
				<li class="tsd-kind-interface tsd-has-type-parameter"><span class="tsd-kind-icon">Interface with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-interface"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-interface"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li>
				<li class="tsd-kind-class tsd-has-type-parameter"><span class="tsd-kind-icon">Class with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class"><span class="tsd-kind-icon">Accessor</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-class"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-constructor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static property</span></li>
				<li class="tsd-kind-call-signature tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static method</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="http://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
<script>if (location.protocol == 'file:') document.write('<script src="assets/js/search.js"><' + '/script>');</script>
</body>
</html>